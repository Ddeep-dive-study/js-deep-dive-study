# 32장 String

## String 생성자 함수

- String 객체
    - 표준 빌트인 객체 : 별도의 선언 없이 전역 변수처럼 언제나 참조 가능
    - 생성자 함수 객체 : new 연산자와 함께 호출하여 String 인스턴스 생성
- 인수 없이 new String() 하면 [[StringData]] 내부 슬롯에 빈 문자열을 할당한 String 래퍼 객체 생성
    - 래퍼 객체 : JS 내장 객체. 원시 값을 감싸 객체처럼 메서드와 프로퍼티를 사용할 수 있도록 해줌
    - 원시 값 종류(7가지) : string, number, bigint, boolean, null, undefined, symbol
    
    ```jsx
    const strObj = new String();
    console.log(strObj); // String {length: 0, [[PrimitiveValue]]: ""}
    ```
    

⇒ 개발자 도구에서 위 코드 실행시키면 [[PrimitiveValue]] 라는 접근할 수 없는 프로퍼티 등장! 

: [[StringData]] 내부 슬롯에 접근할 수 있는 프로퍼티

- 인수로 문자열 넣고 new String(문자열) 호출하면 [[StringData]] 내부 슬롯에 인수로 받은 문자열을 할당한 String 래퍼 객체 생성
    
    ```jsx
    const strObj = new String('Lee');
    console.log(strObj); 
    // String {0: "L", 1: "e", 2: "e", length: 3, [[PrimitiveValue]]: "Lee"}
    ```
    
- String 래퍼 객체는 유사 배열 객체이자 이터러블임(순회가능한 자료구조)
    
    ⇒ 배열처럼 인덱스 사용하여 각 문자에 접근 가능
    
- 원시 값이므로 변경불가 (변경시도 시 에러는 발생 X)
- 문자열 아닌 값을 인수로 전달하면 인수를 문자열로 강제 변환
    
    ⇒ String 인스턴스를 반환
    
- new 연산자 없이 String 생성자 함수 호출하면 String 인스턴스가 아닌 문자열을 반환
    
    ⇒ 이를 이용해 명시적으로 타입을 변환하기도 함
    
    String(null) ⇒ “null”
    

## length 프로퍼티

문자열의 문자 개수를 반환

String 래퍼 객체는 배열처럼 length 프로퍼티를 가짐

인덱스를 프로퍼티 키로, 각 문자를 프로퍼티 값으로 가지므로 유사 배열 객체

## String 메서드

- 배열에는 원본을 직접 변경하는 메서드(mutator method)와
    
    원본은 변경하지 않고 새로운 배열 생성하여 반환하는 메서드(accessor method)가 있음
    
- 하지만! 문자열은 원시값이기 때문에 변경할 수 없음
    
    ⇒ String 래퍼 객체도 읽기 전용(read only) 객체로 제공됨
    
    - 문자열은 불변(immutable)한 원시 값임
    - 원본 String 래퍼 객체를 직접 변경하는 메서드는 존재 X
    - 새로운 문자열을 반환하는 메서드만 존재

### String.prototype.indexOf

대상 문자열에서 인수로 전달받은 문자열을 검색해 첫 번째 인덱스 반환

실패하면 -1 반환

2번째 인수로 검색을 시작할 인덱스 전달 가능

```jsx
const str = 'Hello World';
// 문자열 str의 인덱스 3부터 'l'을 검색하여 첫 번째 인덱스를 반환한다.
str.indexOf('l', 3); // -> 3
```

대상 문자열에 특정 문자열이 존재하는지 확인할 때 유용

ES6에서 도입된 String.prototype.includes 메서드를 사용하면 가독성이 더 좋음

```jsx
if (str.includes('Hello')) {
 // 문자열 str에 'Hello'가 포함되어 있는 경우에 처리할 내용
}
```

### String.prototype.search

대상 문자열에서 인수로 전달받은 정규 표현식과 매치하는 문자열 검색하여 일치하는 문자열 인덱스 반환

### String.prototype.includes

대상 문자열에 인수로 전달받은 문자열이 포함되어 있는지 확인하여 그 결과를 true 또는 false로 반환

2번째 인수로 검색을 시작할 인덱스 전달 가능

### String.prototype.startsWith

대상 문자열이 인수로 전달받은 문자열로 시작하는지 확인하여 그 결과를 true 또는 false로 반환

### String.prototype.endsWith

대상 문자열이 인수로 전달받은 문자열로 끝나는지 확인하여 그 결과를 true 또는 false로 반환

### String.prototype.charAt

대상 문자열에서 인수로 전달받은 인덱스에 위치한 문자를 검색하여 반환

```jsx
const str = 'Hello';

for (let i = 0; i < str.length; i++) {
  console.log(str.charAt(i)); // H e l l o
}
```

### String.prototype.substring

대상 문자열에서 첫 번째 인수로 전달받은 인덱스에 위치하는 문자부터 두 번째 인수로 전달받은 인덱스에 위치하는 문자의 바로 이전 문자까지의 부분 문자열을 반환

```jsx
const str = 'Hello World';

str.substring(1, 4); // ell
```

첫 번째 인수는 두 번째 인수보다 작은 정수이어야 정상이나, 다음과 같이 전달해도 정상 동작

- 첫 번째 인수 > 두 번째 인수인 경우 두 인수는 교환됨
- 인수 < 0 또는 NaN인 경우 0으로 취급
- 인수 > 문자열의 길이(str.length)인 경우 인수는 문자열의 길이로 취급

indexOf와 함께 사용하면 특정 문자열을 기준으로 앞뒤에 위치한 부분 문자열 구할 수 있음

```jsx
const str = 'Hello World';

str.substring(0, str.indexOf(' ')); // 'Hello'

str.substring(str.indexOf(' ') + 1, str.length); // 'World'
```

### String.prototype.slice

substring 메서드와 동일하게 동작하나 slice 메서드에는 음수인 인수 전달 가능

```jsx
const str = 'hello world';

str.substring(0, 5); // 'hello'
str.slice(0, 5); // 'hello'

str.substring(-5); // 'hello world'
str.slice(-5); // 'world'
```

### String.prototype.toUpperCase

대상 문자열을 모두 대문자로 변경한 문자열 반환

### String.prototype.toLowerCase

대상 문자열을 모두 소문자로 변경한 문자열 반환

### String.prototype.trim

대상 문자열 앞뒤에 공백 문자가 있을 경우 이를 제거한 문자열 반환

### String.prototype.repeat

대상 문자열을 인수로 전달받은 정수만큼 반복해 연결한 새로운 문자열을 반환

```jsx
const str = 'abc';

str.repeat(); // ''
str.repeat(2); // 'abcabc'
str.repeat(2.5); // 'abcabc'
str.repeat(-1); // RangeError
```

### String.prototype.replace

대상 문자열에서 첫 번째 인수로 전달받은 문자열 또는 정규표현식을 검색하여 두 번째 인수로 전달한 문자열로 치환한 문자열 반환

두 번째 인수로 치환 함수를 전달할 수 있다

```jsx
// 카멜 케이스를 스네이크 케이스로 변환
function camelToSnake(camelCase) {
  return camelCase.replace(/.[A-Z]/g, match => {
    console.log(match); // 'oW'
    return match[0] + '_' + match[1].toLowerCase();
  });
}

const camelCase = 'helloWorld';
camelToSnake(CamelCase); // 'hello_world'

```

### String.prototype.split

대상 문자열에서 첫 번째 인수로 전달한 문자열 또는 정규 표현식을 검색하여 문자열을 구분한 후 분리된 각 문자열로 이루어진 배열 반환

인수로 빈 문자열을 전달하면 각 문자 모두 분리, 인수를 생략하면 대상 문자열 전체를 단일 요소로 하는 배열 반환

```jsx
const str = 'How are you doing?';

str.split(' '); // ["How", "are", "you", "doing?"]
```

## Quiz

1. 출력 결과가 뭘~까~요?

```jsx
let str1 = 'hello';
let str2 = new String('hello');
let str3 = 'hello';
let str4 = new String('hello');

console.log(str1 === str3); 
console.log(str2 === str4); 
console.log(str2.valueOf() === str4.valueOf()); 
```

1. `str` 변수에는 원시값 문자열이 할당되었다.

객체의 프로토타입 메서드는 오직 해당 객체에서만 호출 가능하다.

`String` 객체의 프로토타입 메서드인 `charAt`을 호출할 수 없어야 하는 거 아닐까?

```jsx
let str = 'hello';
console.log(str.charAt(1)); // 'e';
```

[모던 자바스크립트 Deep Dive 32장 - 문자열 객체](https://redjen8.github.io/posts/js-deepdive/string/#자바스크립트에서-문자열은-어떻게-메모리에-저장될까)